global:
  scrape_interval: 5s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["prometheus:9090"]

  - job_name: "cadvisor"
    static_configs:
      - targets: ["cadvisor:8080"]
    metric_relabel_configs:
      # Adiciona container_name baseado no label do Docker Compose
      - source_labels: [container_label_com_docker_compose_service]
        target_label: container_name
      # Adiciona container_name baseado no nome do container se n√£o tiver service
      - source_labels: [name]
        target_label: container_name
        regex: "/?(.*)"
        replacement: "${1}"

  - job_name: "node_exporter"
    static_configs:
      - targets: ["node_exporter:9100"]
